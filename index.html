<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
<link rel="stylesheet" href="extraFont.css">
  <title>ހެނދުނާއި ހަވީރުގެ ޛިކުރު</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Amiri&family=Scheherazade+New&family=Cairo:wght@700&family=Lateef&family=Reem+Kufi:wght@700&display=swap');

    body {
      background: #222;
      color: #fff;
      font-family: 'MVTyper', 'Amiri', 'Scheherazade New', 'Cairo', 'Lateef', 'Reem Kufi', serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
    }
    .main-content {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .header-slide {
      background: #333;
      font-family: 'MVTyper', 'Amiri', serif;
      border-radius: 16px;
      padding: 22px;
      max-width: 800px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      text-align: center;
      font-size: 20px; /* Initial font size */
      line-height: 1.6;
      margin-bottom: 10px;
      margin-top: 10px;
      direction: rtl;
      user-select: none;
      color: #fff;
      font-weight: bold;
      letter-spacing: 2px;
      transition: font-size 0.2s;
    }
    body.theme-dark {
      background: #222;
      color: #fff;
    }
    body.theme-light {
      background: #fff;
      color: #222;
    }
    body.theme-light .header-slide {
      background: #f8f8f8;
      color: #222;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
    }
    .slide {
      background: #333;
      border-radius: 16px;
      padding: 22px;
      max-width: 800px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      text-align: right;
      font-size: 16px; /* Initial font size */
      line-height: 2.3;
      margin-bottom: -5px;
      direction: rtl;
      user-select: none;
      cursor: pointer;
      transition: box-shadow 0.2s, font-size 0.2s;
      font-family: 'Amiri', serif;
      color: #fff;
    }
    .slide:active { box-shadow: 0 2px 8px rgba(0,0,0,0.4); }
    body.theme-light .slide { background: #f8f8f8; color: #222; box-shadow: 0 8px 32px rgba(0,0,0,0.08); }
    .meaning-section {
      background: #333;
      border-radius: 16px;
      padding: 22px;
      max-width: 800px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      text-align: right;
      font-size: 14px; /* Initial font size */
      line-height: 1.6;
      margin-bottom: 12px;
      direction: rtl;
      user-select: none;
      cursor: pointer;
      transition: box-shadow 0.2s, font-size 0.2s;
      font-family: 'MVTyper', 'Amiri', 'Scheherazade New', 'Cairo', 'Lateef', 'Reem Kufi', serif;
      color: #fff;
    }
    body.theme-light .meaning-section {
      background: #f8f8f8;
      color: #222;
      box-shadow: 0 4px 16px rgba(0,0,0,0.07);
    }
    .footer {
      position: fixed;
      bottom: 0;
      right: 0;
      left: 0;
      height: 44px;
      background: #444;
      color: #ffd700;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      font-size: 1em;
      z-index: 100;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.2);
      letter-spacing: 1px;
      padding: 0 12px;
      gap: 10px;
    }
    .footer-info {
      margin-right: auto;
      font-size: 1em;
      color: #ffd700;
      text-align: center;
      min-width: 180px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    body.theme-light .footer-info {
      color: #222;
    }
    .footer-arrows {
      display: flex;
      align-items: center;
      gap: 3px;
    }
    .footer-arrow-btn {
      background: none;
      border: none;
      color: #ffd700;
      font-size: 1.4em;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
      transition: background 0.2s;
    }
    .footer-arrow-btn:active {
      background: #333;
    }
    body.theme-light .footer-arrow-btn {
      color: #222;
      background: #fff;
    }
    body.theme-light .footer { background: #eaeaea; color: #222; box-shadow: 0 -2px 8px rgba(0,0,0,0.07); }
    .theme-switch-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1.5px solid #ffd700;
      margin-left: 0;
      margin-right: 4px;
      outline: none;
      cursor: pointer;
      transition: border 0.2s, box-shadow 0.2s, background 0.2s;
      box-shadow: 0 0 3px #ffd70033;
      background: #fff;
      display: inline-block;
      vertical-align: middle;
      padding: 0;
    }
    body.theme-light .theme-switch-btn {
      background: #222;
      border: 1.5px solid #222;
      box-shadow: 0 0 3px #22233;
    }
    .settings-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1.5px solid #ffd700;
      background: #333;
      color: #ffd700;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3em;
      cursor: pointer;
      margin-left: 4px;
      box-shadow: 0 0 3px #ffd70033;
      transition: border 0.2s, box-shadow 0.2s, background 0.2s;
    }
    body.theme-light .settings-btn {
      background: #fff;
      color: #222;
      border: 1.5px solid #222;
      box-shadow: 0 0 3px #22233;
    }
    .slide-switch-btn {
      padding: 0 12px;
      font-family: 'MVTyper', 'Amiri', serif;
      height: 28px;
      border-radius: 6px;
      border: 1px solid #ffd700;
      background: #333;
      color: #ffd700;
      font-size: 1em;
      margin-left: 4px;
      cursor: pointer;
      transition: background 0.2s, border 0.2s;
    }
    body.theme-light .slide-switch-btn {
      background: #fff;
      color: #222;
      border: 1px solid #222;
    }
    .popup-settings {
      position: fixed;
      bottom: 50px;
      right: 24px;
      background: #222;
      color: #ffd700;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.27);
      padding: 24px 32px 20px 32px;
      z-index: 200;
      min-width: 260px;
      display: none;
      flex-direction: column;
      gap: 16px;
      font-size: 1.15em;
      border: 1px solid #ffd700;
    }
    body.theme-light .popup-settings {
      background: #fff;
      color: #222;
      border: 1px solid #222;
      box-shadow: 0 4px 16px rgba(0,0,0,0.07);
    }
    .popup-settings label {
      color: #ffd700;
      font-size: 1em;
      margin-right: 6px;
      display: inline-block;
      margin-bottom: 3px;
    }
    body.theme-light .popup-settings label { color: #222; }
    .popup-settings input[type="range"] { accent-color: #ffd700; height: 2px; width: 120px; vertical-align: middle; }
    body.theme-light .popup-settings input[type="range"] { accent-color: #222; }
    .popup-settings select {
      background: #222;
      color: #ffd700;
      border: 1px solid #ffd700;
      border-radius: 4px;
      font-size: 1em;
      padding: 2px 6px;
      margin-left: 6px;
      height: 28px;
      vertical-align: middle;
    }
    body.theme-light .popup-settings select { background: #fff; color: #222; border: 1px solid #222; }
    .popup-settings .close-settings {
      background: transparent;
      color: #ffd700;
      border: none;
      font-size: 1.3em;
      cursor: pointer;
      position: absolute;
      top: 10px;
      left: 16px;
    }
    body.theme-light .popup-settings .close-settings { color: #222; }
    .popup-settings-row {
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .popup-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: transparent;
      z-index: 199;
      display: none;
    }
  </style>
</head>
<body class="theme-dark">
  <div class="main-content" id="main-content">
    <div class="header-slide" id="header-slide">ދުޢާ</div>
    <div class="slide" id="slide"></div>
    <section class="meaning-section" id="meaning-section"></section>
  </div>
  <div class="footer">
    <span class="footer-info" id="footer-info">
      <!-- Dynamic info goes here -->
    </span>
    <div class="footer-arrows">
      <button class="footer-arrow-btn" id="prev-dhikr" title="ކުރީގެ ޛިދުކުރު"><</button>
      <button class="footer-arrow-btn" id="next-dhikr" title="އަނެއް ޛިކުރު">></button>
    </div>
    <button class="slide-switch-btn" id="slide-switch-btn">ހަވީރުގެ ޛިކުރު</button>
    <button class="theme-switch-btn" id="theme-switch-btn" title="Toggle theme"></button>
    <button class="settings-btn" id="settings-btn" title="Settings">&#9881;</button>
  </div>
  <div class="popup-overlay" id="popup-overlay"></div>
  <div class="popup-settings" id="popup-settings">
    <button class="close-settings" id="close-settings" title="Close">&times;</button>
    <div class="popup-settings-row">
      <label for="font-size">ފޮންޓް ސައިޒް:</label>
      <input type="range" id="font-size" min="10" max="32" value="14">
      <span id="font-size-value">14px</span>
    </div>
    <div class="popup-settings-row">
      <label for="arabic-font">ފޮންޓް:</label>
      <select id="arabic-font">
        <option value="'Amiri', serif" selected>الأميري</option>
        <option value="'Scheherazade New', serif">سِلسلة جديدة من شهرزاد</option>
        <option value="'Cairo', sans-serif">قاهرة</option>
        <option value="'Lateef', serif">لطيف </option>
        <option value="'Reem Kufi', sans-serif">كوفي ريم</option>
      </select>
    </div>
  </div>
  <script>

    // Morning slides (add "meaning" property)

    const morningSlides = [
      { 
        text: "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ للهِ وَالْحَمْدُ للهِ ، لاَ إِلَهَ إِلاَّ اللهُ وَحْدَهُ لاَ شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ، وَهُوَ عَلَى كُلِّ شَىْءٍ قَدِيرٌ ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِيْ هَذَا الْيَوْمِ وَخَيْرَ مَا بَعْدَهُ ، وَأَعُوْذُ بِكَ مِنْ شَرِّ مَا فِي هَذَا الْيَوْمِ وَشَرِّ مَا بَعْدَهُ، رَبِّ أَعُوْذُ بِكَ مِنَ الكَسَلِ، وَسُوءِ الكِبَرِ، رَبِّ أَعُوْذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ وَعَذَابٍ فِي الْقَبْرِ", 
        meaning: "އަޅަމެން ހެނދުނު ކޮށްފީމުއެވެ. އަދި އެންމެހައި ވެރިކަމެއް ﷲ އަށް ޓަކައި ހެނދުނު ކޮށްފިއެވެ. (ނުވަތަ އެންމެހައި ވެރިކަމެއް ﷲ އަށް މިލްކުވެއްޖެއެވެ.) އަދި ހުރިހާ ހަމްދެއްވަނީ ﷲ އަށެވެ. ﷲ މެނުވީ އަޅުކަން ވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. އެއިލާހު އެއްކައުވަންތައެވެ. އެއިލާހަށް އެއްވެސް ބައިވެރިއަކު ނުވެއެވެ. ހުރިހާ ވެރިކަމަކާއި ހުރިހާ ޙަމްދެއް ލިބިވޮޑިގެންވަނީ އެއިލާހަށެވެ. އަދި އެއިލާހުއީ ހުރިހާ ކަމެއްގެ މައްޗަށް ކުޅަދުންވަންތަވެވޮޑިގެންވާ ވެރި އިލާހެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! މިއަދުގައި ވާހައި ހެޔޮކަމާއި، މިއަދަށްފަހު ވާހައި ހެޔޮކަމެއް ދެއްވުމަށް އެދި މި އަޅާ އިބަ ﷲ ގެ ހަޟްރަތުން ދަންނަވަމެވެ. އަދި މިއަދުގައި ވާހައި ނުބައި ކަމުންނާއި، މިއަދަށްފަހުގައި ވާހައި ނުބައިކަމުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި މި އަޅާ އިބަ ﷲ ގެ ހަޟްރަތުން ދަންނަވަމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! ކަންނެއްކަމާއި މުސްކުޅިކަމުގެ ނުބައިކަމުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި މިއަޅާ އިބަ ﷲ ގެ ހަޟްރަތުން ދަންނަވަމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! ނަރަކައިގެ އަޛާބުންނާއި ކަށްވަޅުގެ އަޛާބުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި މި އަޅާ އިބަ ﷲ ގެ ޙާޟްރަތުން ދަންނަވަމެވެ.",
        clicks: 1 
      },
      { 
        text: "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ النُّشُوْرُ", 
        meaning: "އޭ ހައްދަވައި ބޮޑު ކުރެއްވި އިލާހެވެ! އިބަ ﷲ ގެ ވާގިފުޅާއިއެކު އަޅަމެން ހެނދުނުކުރީމެވެ. އަދި ހަމަ އިބަ ﷲ ގެ ވާގިފުޅާއިއެކު އަޅަމެން ހަވީރުކުރީމެވެ. އަދި އިބަ ﷲ ގެ ރައްކާތެރިކަމާއިއެކު އަޅަމެން ދިރި ތިބެމުއެވެ. އަދި ހަމަ އިބަ ﷲ ގެ ރައްކާތެރިކަމާއިއެކު އަޅަމެން މަރުވަމެވެ. އަދި ކަށްވަޅުން ތެދުވެގެން ދިއުންވަނީ އިބަ ﷲ ގެ ޙަޟްރަތަށެވެ.",
        clicks: 1 
      },
      { 
        text: "اَللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ بِذَنْبِي، فَاغْفِر لِي فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ", 
        meaning: "އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! އިބަ ﷲ އީ މި އަޅާގެ ވެރި އިލާހެވެ. އިބަ ﷲ ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކުނުވެއެވެ. މި އަޅާ ހެއްދެވީ އިބަ ﷲ އެވެ. އަދި މިއަޅާއީ އިބަ ﷲ ގެ އަޅަކީމެވެ. އަދި މިއަޅާއަށް ކުޅަދާނަވީ މިންވަރަކުން މި އަޅާ މިހުރީ އިބަ ﷲ ގެ ޢަހުދުގެ މަތީގައެވެ. އަދި އިބަ ﷲ ގެ ވަޢުދުގެ މަތީގައެވެ. މި އަޅާއަށް ކުރެވިފައިވާ ކަންތައްތަކުގެ ނުބައިކަމުން ރައްކާތެރިކޮށްދެއްވުމަށް މި އަޅާ އިބަ ﷲ ގެ ޙަޟްރަތުން އެދި ދަންނަވަމެވެ. މި އަޅާގެ މައްޗަށްވާ އިބަ ﷲ ގެ ނިޢުމަތަށް މި އަޅާ އިޢުތިރާފުވަމެވެ. އަދި މި އަޅާގެ ފާފަތަކަށްވެސް މި އަޅާ އިޢުތިރާފުވަމެވެ. ފަހެ މި އަޅާއަށް ފާފަފުއްސަވައިދޭވެ! އެހެނީ ހަމަކަށަވަރުން އިބަ ﷲ ފިޔަވައި ފާފަފުއްސަވައިދެވޭނެ އެހެންފަރާތެއް ނުވެއެވެ.",
        clicks: 1 
      },
      { 
        text: "حَسْبِيَ اللهُ لَآ إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ", 
        meaning: "މި އަޅާއަށް ﷲ ފުދެއެވެ. އެއިލާހު ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. މި އަޅާ ވަކީލުކުރަނީ ހަމައެކަނި އެއިލާހަށެވެ. އަދި އެއިލާހުއީ މަތިވެރި ޢަރުޝުގެ ވެރި އިލާހެވެ.",
        clicks: 7 
      },
      { 
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ فِي الدُّنْيَا وَالْآخِرَةِ، اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَفْوَ وَالْعَافِيَةَ فِي دِينِي، وَدُنْيَايَ، وَأَهْلِي، وَمَالِي، اللَّهُمَّ اسْتُرْ عَوْرَاتِي، وَآمِنْ رَوْعَاتِي، اللَّهُمَّ احْفَظْنِي مِنْ بَيْنِ يَدَيَّ، وَمِنْ خَلْفِي، وَعَنْ يَمِينِي، وَعَنْ شِمَالِي، وَمِنْ فَوْقِي، وَأَعُوذُ بِعَظَمَتِكَ أَنْ أُغْتَالَ مِنْ تَحْتِيَ", 
        meaning: "އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! ހަމަކަށަވަރުން މި އަޅާ އިބަ ﷲ ގެ ޙަޟްރަތުން ދުނިޔެއާއި އާޚިރަތުގެ ފުރިހަމަ ޢާފިޔަތައް އެދި ދަންނަވެމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި އިލާހެވެ! މި އަޅާ އިބަ ﷲ ގެ ޙަޟްރަތުން އަފޫކޮށްދެއްވުމަށް އެދި ދަންނަވަމެވެ. އަދި މި އަޅާގެ ދީނާއި، އަދި ދުނިޔޭގައާއި، އަދި މި އަޅާގެ އަހުލުވެރިންނާއި، މުދަލުގައި ފުރިހަމަ ޢާފިޔަތަކަށް އެދި ދަންނަވަމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! މި އަޅާގެ ޢައިބުތައް ވަންހަނާ ކޮށްދެއްވާނދޭވެ! އަދި މި އަޅާގެ ބިރުގަތުންތަކުން އަމާންކަން ދެއްވާދޭނދޭވެ! އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! މި އަޅާގެ ކުރިމަތިންނާއި، މި އަޅާގެ ފުރަގަހުންނާއި، މި އަޅާގެ ކަނާތްފަރާތުންނާއި، މި އަޅާގެ ވާތްފަރާތުންނާއި އަދި މި އަޅާގެ މަތިން މި އަޅާ ރައްކާތެރިކޮށްދެއްވާނދޭވެ! އަދި ކުއްލިއަކަށް މި އަޅާގެ ދަށުން މި އަޅާ ހަލާކުވެދިއުމުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި އިބަ ﷲ ގެ މާތްކަން މެދުވެރިކޮށް ދަންނަވަމެވެ.",
        clicks: 1 
      },
      { 
        text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّماوَاتِ وَالْأَرْضِ، رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي، وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ", 
        meaning: "އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! ޣައިބުގައިވާ ކަންތަކާއި، ފެންނަހައި ކަމެއް ދެނެވޮޑިގެންވާ އިލާހެވެ! އުޑުތަކާއި ބިން ނެތުމުގެ ތެރެއިން ހެއްދެއްވި އިލާހެވެ! ހުރިހައި އެއްޗެއްގެ ވެރި އަދި އެތަކެތީގެ މިލްކުވެރި އިލާހެވެ! އިބަ ﷲ ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެންއެއްވެސް އިލާހަކުނުވާކަމަށް މި އަޅާ ހެކިވަމެވެ. މި އަޅާގެ ނަފްސުގެ ނުބައިކަމާއި، އެޝައިތާނާ (އިބަ ﷲ އާ) ޝަރީކުކުރުމަށް ލައިދޭ ވަސްވާހުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި އިބަ ﷲ ގެ ޙަޟްރަތުން ދަންނަވަމެވެ.",
        clicks: 1 
      },
      { 
        text: "بِسْمِ اللهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ", 
        meaning: "ﷲ ގެ އިސްމުފުޅުގެ ބަރަކާތުން (ރައްކާތެރިކަށް ލިބިގަންނަމެވެ.) އެއިލާހުގެ އިސްމުފުޅުގެ ބަރަކާތާއިއެކު، ބިމާއި އުޑުން އެއްވެސް އެއްޗެއް ގެއްލުމެއް ނުދޭނެތެވެ. އަދި އެއިލާހުއީ މޮޅަށް އައްސަވައިވޮޑިގެންވާ މޮޅަށް ދެނެވޮޑިގެންވާ ވެރި އިލާހެވެ.",
        clicks: 3 
      },
      { 
        text: "رَضِيتُ باللهِ رَبًّا، وَبِالْإِسْلَامِ دِيناً، وَبِمُحَمَّدٍ صَلَّى اللهُ عَلِيهِ وَسَلَّمَ نَبِيَّا", 
        meaning: "ﷲ އީ ހުރިހައި އެއްޗެއްގެ ވެރި އިލާހުކަމަށާއި، އަދި އިސްލާމްދީނަކީ ދީންކަމަށާއި، އަދި މުޙައްމަދު ؛ އީ ނަބިއްޔާކަމަށް އަހުރެން ރުހިއްޖައީމެވެ.",
        clicks: 3 
      },
      { 
        text: "ياَحَيُّ، يَا قَيُّومُ، بِرَحْمَتِكَ أَسْتَغِيثُ، أَصْلِحْ لِي شَأْنِي كُلَّهُ، وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ", 
        meaning: "އޭ ދިރިދެމިވޮޑިގެންވާ އިލާހެވެ! އޭ މުޅި ކާއިނާތު ބެލެހެއްޓުމުގައި ޤާއިމުވެވޮޑިގެންވާ އިލާހެވެ! ހަމައެކަނި އިބަ ﷲ ގެ ރަޙުމަތުގެ ޒަރިއްޔާއިން މި އަޅާ ފަރިޔާދުކުރަމެވެ. މި އަޅާގެ ހުރިހައިކަމެއް މި އަޅާއަށް އިސްލާހުކޮށްދެއްވާދޭނވެ! އަދި އެސްފިޔަޖަހާލާހާ ހިނދުކޮޅަކަށްވެސް މި އަޅާއާ މި އަޅާގެ ނަފްސު ހަވާލުނުކުރައްވާދޭނވެ!",
        clicks: 1 
      },
      { 
        text: "أَصْبَحْنَا عَلَى فِطْرَةِ الْإِسْلَامِ، وَكَلِمَةِ الْإِخْلَاصِ، وَدِينِ نَبِيِّنَا مُحَمَّدٍ صَلَى اللهُ عَلِيهِ وَسَلَّمَ، وَمِلَّةِ أَبِينَا إِبْرَاهِيمَ، حَنِيفَاً مُسْلِماً وَمَا كَانَ مِنَ الُمشْرِكِينَ", 
        meaning: "އިސްލާމްދީނުގެ ފިޠުރަތުގެ މައްޗަށާއި، އިޚްލާސްތެރި ކަލިމަފުޅުގެ (ޝަހާދަތުގެ ކަލިމަފުޅު) މައްޗަށާއި، އަޅަމެންގެ ނަބިއްޔާ މުޙައްމަދު ؛ ގެ ދީނުގެ މައްޗަށާއި އަދި އަޅަމެންގެ ބައްޕަ އިބްރާޙިމް عليه السلام ގެ މިއްލަތުގެ މައްޗަށް އަޅަމެން ހެނދުނުކޮށްފީމުއެވެ. އެކަލޭގެފާނަކީ ހުރިހާ ބާޠިލު އަޤީދާތަކަކުން އެއްކިބާވެގެންވާ (ﷲ އަށް) ކިޔަމަންތެރި ބޭކަލެކެވެ. އަދި މުޝްރިކުންގެ ތެރެއިން އެކަލޭގެފާނު ވެވަޑައިނުގަންނަވަތެވެ.",
        clicks: 1 
      },
      { 
        text: "سُبْحَانَ اللهِ وَبِحَمْدِهِ عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ وَمِدَادَ كَلِمَاتِهِ", 
        meaning: "މާތް ﷲ، އެއިލާހަށް ޙަމްދުލިބިވޮޑިގެން ވުމާއިއެކު، ހުސްޠާހިރުވެ ވޮޑިގެންވެއެވެ. އެއީ އެއިލާހުގެ މަޚްލޫގުންގެ އަދަދާއި އެއްވަރަށެވެ. އަދި އެއިލާހު ޒާތުފުޅަށް އެއިލާހު ރުހިވޮޑިގެންވާ މިންވަރަށެވެ. އަދި އެއިލާހުގެ ޢަރުޝުގެ ވަޒަނާ އެއްވަރަށެވެ. އަދި އެއިލާހުގެ ކަލިމަފުޅުތަކުގެ ދެއްޔާއި އެއްވަރަށެވެ.",
        clicks: 3 
      },
      { 
        text: "سُبْحَانَ اللهِ وَبِحَمْدِهِ", 
        meaning: "މާތް ﷲ، އެއިލާހަށް ޙަމްދު ލިބިވޮޑިގެންވުމާއިއެކު، ހުސްޠާހިރުވެ ވޮޑިގެންވެއެވެ.",
        clicks: 100 
      },
      { 
        text: "لا إِلَهَ إِلَّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ، وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ", 
        meaning: "ﷲ މެނުވީ އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. އެއިލާހު އެއްކައުވަންތައެވެ. އެއިލާހަށް އެއްވެސް ބައިވެރިއަކު ނުވެއެވެ. ހުރިހާ ވެރިކަމަކާއި ހުރިހާ ޙަމްދެއް ލިބިވޮޑިގެންވަނީ އެއިލާހަށެވެ. އަދި އެއިލާހުއީ ހުރިހާ ކަމެއްގެ މައްޗަށް ކުޅަދުންވަންތަވެވޮޑިގެންވާ ވެރި އިލާހެވެ.",
        clicks: 100 
      },
    ];
    // Evening Dhikr Meanings
    const eveningSlides = [
      { 
        text: "أمْسَيْنَا وَأَمْسَى الْمُلْكُ للهِ ، وَالْحَمْدُ للهِ ، وَلاَ إِلَهَ إِلاَّ اللهُ وَحْدَهُ لاَ شَرِيكَ لَهُ ، لَهُ الْمُلْكُ ، وَلَهُ الْحَمْدُ ، وَهُوَ عَلَى كُلِّ شَىْءٍ قَدِيرٌ ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِيْ هَذِهِ اللَّيْلَةِ وَخَيْرَ مَا بَعْدَهَا، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِيْ هَذِهِ اللَّيْلَةِ وَشَرِّ مَا بَعْدَهَا ، رَبِّ أَعُوذُ بِكَ مِنَ الْكَسَلِ وَسُوءِ الْكِبَرِ ، رَبِّ أَعُوذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ ، وَعَذَابٍ فِي الْقَبْرِ", 
        meaning: "އަޅަމެން ހަވީރުކޮށްފީމުއެވެ. އަދި އެންމެހައި ވެރިކަމެއް ﷲ އަށް ޓަކައި ހަވީރުކޮށްފިއެވެ. (ނުވަތަ އެންމެހައި ވެރިކަމެއް ﷲ އަށް މިލްކުވެއްޖެއެވެ.) އަދި ހުރިހާ ހަމްދެއްވަނީ ﷲ އަށެވެ. ﷲ މެނުވީ އަޅުކަން ވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. އެއިލާހު އެއްކައުވަންތައެވެ. އެއިލާހަށް އެއްވެސް ބައިވެރިއަކު ނުވެއެވެ. ހުރިހާ ވެރިކަމަކާއި ހުރިހާ ޙަމްދެއް ލިބިވޮޑިގެންވަނީ އެއިލާހަށެވެ. އަދި އެއިލާހުއީ ހުރިހާ ކަމެއްގެ މައްޗަށް ކުޅަދުންވަންތަވެވޮޑިގެންވާ ވެރި އިލާހެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! މިއަދުގައި ވާހައި ހެޔޮކަމާއި، މިއަދަށްފަހު ވާހައި ހެޔޮކަމެއް ދެއްވުމަށް އެދި މި އަޅާ އިބަ ﷲ ގެ ހަޟްރަތުން ދަންނަވަމެވެ. އަދި މިއަދުގައި ވާހައި ނުބައި ކަމުންނާއި، މިއަދަށްފަހުގައި ވާހައި ނުބައިކަމުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި މި އަޅާ އިބަ ﷲ ގެ ހަޟްރަތުން ދަންނަވަމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! ކަންނެއްކަމާއި މުސްކުޅިކަމުގެ ނުބައިކަމުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި މިއަޅާ އިބަ ﷲ ގެ ހަޟްރަތުން ދަންނަވަމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! ނަރަކައިގެ އަޛާބުންނާއި ކަށްވަޅުގެ އަޛާބުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި މި އަޅާ އިބަ ﷲ ގެ ޙާޟްރަތުން ދަންނަވަމެވެ.",
        clicks: 1 
      },
      { 
        text: "حَسْبِيَ اللهُ لَآ إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ", 
        meaning: "މި އަޅާއަށް ﷲ ފުދެއެވެ. އެއިލާހު ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. މި އަޅާ ވަކީލުކުރަނީ ހަމައެކަނި އެއިލާހަށެވެ. އަދި އެއިލާހުއީ މަތިވެރި ޢަރުޝުގެ ވެރި އިލާހެވެ.",
        clicks: 7 
      },
      { 
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ فِي الدُّنْيَا وَالْآخِرَةِ، اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَفْوَ وَالْعَافِيَةَ فِي دِينِي، وَدُنْيَايَ، وَأَهْلِي، وَمَالِي، اللَّهُمَّ اسْتُرْ عَوْرَاتِي، وَآمِنْ رَوْعَاتِي، اللَّهُمَّ احْفَظْنِي مِنْ بَيْنِ يَدَيَّ، وَمِنْ خَلْفِي، وَعَنْ يَمِينِي، وَعَنْ شِمَالِي، وَمِنْ فَوْقِي، وَأَعُوذُ بِعَظَمَتِكَ أَنْ أُغْتَالَ مِنْ تَحْتِيَ", 
        meaning: "އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! ހަމަކަށަވަރުން މި އަޅާ އިބަ ﷲ ގެ ޙަޟްރަތުން ދުނިޔެއާއި އާޚިރަތުގެ ފުރިހަމަ ޢާފިޔަތައް އެދި ދަންނަވެމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއްވި އިލާހެވެ! މި އަޅާ އިބަ ﷲ ގެ ޙަޟްރަތުން އަފޫކޮށްދެއްވުމަށް އެދި ދަންނަވަމެވެ. އަދި މި އަޅާގެ ދީނާއި، އަދި ދުނިޔޭގައާއި، އަދި މި އަޅާގެ އަހުލުވެރިންނާއި، މުދަލުގައި ފުރިހަމަ ޢާފިޔަތަކަށް އެދި ދަންނަވަމެވެ. އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! މި އަޅާގެ ޢައިބުތައް ވަންހަނާ ކޮށްދެއްވާނދޭވެ! އަދި މި އަޅާގެ ބިރުގަތުންތަކުން އަމާންކަން ދެއްވާދޭނދޭވެ! އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! މި އަޅާގެ ކުރިމަތިންނާއި، މި އަޅާގެ ފުރަގަހުންނާއި، މި އަޅާގެ ކަނާތްފަރާތުންނާއި، މި އަޅާގެ ވާތްފަރާތުންނާއި އަދި މި އަޅާގެ މަތިން މި އަޅާ ރައްކާތެރިކޮށްދެއްވާނދޭވެ! އަދި ކުއްލިއަކަށް މި އަޅާގެ ދަށުން މި އަޅާ ހަލާކުވެދިއުމުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި އިބަ ﷲ ގެ މާތްކަން މެދުވެރިކޮށް ދަންނަވަމެވެ.",
        clicks: 1 
      },
      { 
        text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّماوَاتِ وَالْأَرْضِ، رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي، وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ", 
        meaning: "އޭ ހައްދަވައި ބޮޑުކުރެއެއްވި އިލާހެވެ! ޣައިބުގައިވާ ކަންތަކާއި، ފެންނަހައި ކަމެއް ދެނެވޮޑިގެންވާ އިލާހެވެ! އުޑުތަކާއި ބިން ނެތުމުގެ ތެރެއިން ހެއްދެއްވި އިލާހެވެ! ހުރިހައި އެއްޗެއްގެ ވެރި އަދި އެތަކެތީގެ މިލްކުވެރި އިލާހެވެ! އިބަ ﷲ ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެންއެއްވެސް އިލާހަކުނުވާކަމަށް މި އަޅާ ހެކިވަމެވެ. މި އަޅާގެ ނަފްސުގެ ނުބައިކަމާއި، އެޝައިތާނާ (އިބަ ﷲ އާ) ޝަރީކުކުރުމަށް ލައިދޭ ވަސްވާހުން ރައްކާތެރިކޮށްދެއްވުމަށް އެދި އިބަ ﷲ ގެ ޙަޟްރަތުން ދަންނަވަމެވެ.",
        clicks: 1 
      },
      { 
        text: "بِسْمِ اللهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ ", 
        meaning: "މި އަޅާއަށް ﷲ ފުދެއެވެ. އެއިލާހު ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. މި އަޅާ ވަކީލުކުރަނީ ހަމައެކަނި އެއިލާހަށެވެ. އަދި އެއިލާހުއީ މަތިވެރި ޢަރުޝުގެ ވެރި އިލާހެވެ.",
        clicks: 3 
      },
      { 
        text: "رَضِيتُ باللهِ رَبًّا، وَبِالْإِسْلَامِ دِيناً، وَبِمُحَمَّدٍ صَلَّى اللهُ عَلِيهِ وَسَلَّمَ نَبِيَّا", 
        meaning: "ﷲ އީ ހުރިހައި އެއްޗެއްގެ ވެރި އިލާހުކަމަށާއި، އަދި އިސްލާމްދީނަކީ ދީންކަމަށާއި، އަދި މުޙައްމަދު ؛ އީ ނަބިއްޔާކަމަށް އަހުރެން ރުހިއްޖައީމެވެ.",
        clicks: 3 
      },
      { 
        text: "ياَحَيُّ، يَا قَيُّومُ، بِرَحْمَتِكَ أَسْتَغِيثُ، أَصْلِحْ لِي شَأْنِي كُلَّهُ، وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ", 
        meaning: "އޭ ދިރިދެމިވޮޑިގެންވާ އިލާހެވެ! އޭ މުޅި ކާއިނާތު ބެލެހެއްޓުމުގައި ޤާއިމުވެވޮޑިގެންވާ އިލާހެވެ! ހަމައެކަނި އިބަ ﷲ ގެ ރަޙުމަތުގެ ޒަރިއްޔާއިން މި އަޅާ ފަރިޔާދުކުރަމެވެ. މި އަޅާގެ ހުރިހައިކަމެއް މި އަޅާއަށް އިސްލާހުކޮށްދެއްވާދޭނވެ! އަދި އެސްފިޔަޖަހާލާހާ ހިނދުކޮޅަކަށްވެސް މި އަޅާއާ މި އަޅާގެ ނަފްސު ހަވާލުނުކުރައްވާދޭނވެ!",
        clicks: 1 
      },
      { 
        text: "سُبْحَانَ اللهِ وَبِحَمْدِهِ", 
        meaning: "މާތް ﷲ، އެއިލާހަށް ޙަމްދު ލިބިވޮޑިގެންވުމާއިއެކު، ހުސްޠާހިރުވެ ވޮޑިގެންވެއެވެ.",
        clicks: 100 
      },
      { 
        text: "لا إِلَهَ إِلَّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ، وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ", 
        meaning: "ﷲ މެނުވީ އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކު ނުވެއެވެ. އެއިލާހު އެއްކައުވަންތައެވެ. އެއިލާހަށް އެއްވެސް ބައިވެރިއަކު ނުވެއެވެ. ހުރިހާ ވެރިކަމަކާއި ހުރިހާ ޙަމްދެއް ލިބިވޮޑިގެންވަނީ އެއިލާހަށެވެ. އަދި އެއިލާހުއީ ހުރިހާ ކަމެއްގެ މައްޗަށް ކުޅަދުންވަންތަވެވޮޑިގެންވާ ވެރި އިލާހެވެ.",
        clicks: 100 
      },
      { 
        text: "اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ الْمَصِيرُ", 
        meaning: "އޭ ހައްދަވައި ބޮޑު ކުރެއްވި އިލާހެވެ! އިބަ ﷲ ގެ ވާގިފުޅާއިއެކު އަޅަމެން ހަވީރުކުރީމެވެ. އަދި ހަމަ އިބަ ﷲ ގެ ވާގިފުޅާއިއެކު އަޅަމެން ހެނދުނުކުރީމެވެ. އަދި އިބަ ﷲ ގެ ރައްކާތެރިކަމާއިއެކު އަޅަމެން ދިރި ތިބެމުއެވެ. އަދި ހަމަ އިބަ ﷲ ގެ ރައްކާތެރިކަމާއިއެކު އަޅަމެން މަރުވަމެވެ. އަދި އެނބުރި ދިއުންވަނީ އިބަ ﷲ ގެ ޙަޟްރަތަށެވެ.",
        clicks: 1 
      },
      { 
        text: "اللَّهُمَّ أَنْتَ رَبِّي لَّا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ بِذَنْبِي فَاغْفِر لِي فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ ", 
        meaning: "އޭ ހައްދަވައި ބޮޑުކުރެއްވި ރައްބެވެ! އިބަ ﷲ އީ މި އަޅާގެ ވެރި އިލާހެވެ. އިބަ ﷲ ފިޔަވައި އަޅުކަންވެވުން ޙައްޤުވެގެންވާ އެހެން އެއްވެސް އިލާހަކުނުވެއެވެ. މި އަޅާ ހެއްދެވީ އިބަ ﷲ އެވެ. އިދި މިއަޅާއީ އިބަ ﷲ ގެ އަޅަކީމެވެ. އަދި މިއަޅާއަށް ކުޅަދާނަވީ މިންވަރަކުން މި އަޅާ މިހުރީ އިބަ ﷲ ގެ ޢަހުދުގެ މަތީގައެވެ. އަދި އިބަ ﷲ ގެ ވަޢުދުގެ މަތީގައެވެ. މި އަޅާއަށް ކުރެވިފައިވާ ކަންތައްތަކުގެ ނުބައިކަމުން ރައްކާތެރިކޮށްދެއްވުމަށް މި އަޅާ އިބަ ﷲ ގެ ޙަޟްރަތުން އެދި ދަންނަވަމެވެ. މި އަޅާގެ މައްޗަށްވާ އިބަ ﷲ ގެ ނިޢުމަތަށް މި އަޅާ އިޢުތިރާފުވަމެވެ. އަދި މި އަޅާގެ ފާފަތަކަށްވެސް މި އަޅާ އިޢުތިރާފުވަމެވެ. ފަހެ މި އަޅާއަށް ފާފަފުއްސަވައިދޭވެ! އެހެނީ ހަމަކަށަވަރުން އިބަ ﷲ ފިޔަވައި ފާފަފުއްސަވައިދެވޭނެ އެހެންފަރާތެއް ނުވެއެވެ.",
        clicks: 1 
      },
      { 
        text: "أَعُوذُ بِكَلِمَاتِ اللهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ", 
        meaning: "މާތް ﷲ ގެ ފުރިހަމަވެގެންވާ ކަލިމަފުޅުތައް މެދުވެރިކޮށް، އެއިލާހު ހެއްދެވި އެންމެހައި މަޚްލޫގުންގެ ނުބައިކަމުން މި އަޅާ (އެއިލާހުގެ ޙަޟްރަތުން) ރައްކާތެރިކަމަށް އެދެމެވެ.",
        clicks: 1 
      },
    ];


    // Initial slide set logic
    function isMorning() {
      const now = new Date();
      let hour = now.getHours();
      return hour >= 5 && hour <= 12;
    }

    let slideMode = isMorning() ? 'morning' : 'evening';
    let slides = slideMode === 'morning' ? morningSlides : eveningSlides;

    function getHeaderText() {
      if (slideMode === 'morning') {
        return "ހެނދުނުގެ ޛިކުރުތަށް";
      } else {
        return "ހަވީރުގެ ޛިކުރުތަށް";
      }
    }

    let currentSlide = 0;
    let clickCount = 0;
    let fontSize = 18; // Default font size
    let selectedFont = "'Amiri', serif";
    const fontSizeInput = document.getElementById('font-size');
    const fontSizeValue = document.getElementById('font-size-value');
    const fontSelect = document.getElementById('arabic-font');
    const themeSwitchBtn = document.getElementById('theme-switch-btn');
    const slideDiv = document.getElementById('slide');
    const meaningSection = document.getElementById('meaning-section');
    const headerSlide = document.getElementById('header-slide');
    const settingsBtn = document.getElementById('settings-btn');
    const popupSettings = document.getElementById('popup-settings');
    const closeSettingsBtn = document.getElementById('close-settings');
    const popupOverlay = document.getElementById('popup-overlay');
    const slideSwitchBtn = document.getElementById('slide-switch-btn');
    const footerInfo = document.getElementById('footer-info');
    const prevDhikrBtn = document.getElementById('prev-dhikr');
    const nextDhikrBtn = document.getElementById('next-dhikr');
    const mainContent = document.getElementById('main-content');

    function updateSlideSwitchLabel() {
      if (slideMode === 'morning') {
        slideSwitchBtn.textContent = "☾";
      } else {
        slideSwitchBtn.textContent = "☼";
      }
    }

    fontSizeInput.addEventListener('input', function() {
      fontSize = parseInt(this.value);
      fontSizeValue.textContent = fontSize + 'px';
      showSlide();
    });

    fontSelect.addEventListener('change', function() {
      selectedFont = this.value;
      showSlide();
    });

    themeSwitchBtn.addEventListener('click', function() {
      if (document.body.classList.contains('theme-dark')) {
        document.body.classList.remove('theme-dark');
        document.body.classList.add('theme-light');
      } else {
        document.body.classList.remove('theme-light');
        document.body.classList.add('theme-dark');
      }
    });

    slideSwitchBtn.addEventListener('click', function() {
      slideMode = slideMode === 'morning' ? 'evening' : 'morning';
      slides = slideMode === 'morning' ? morningSlides : eveningSlides;
      currentSlide = 0;
      clickCount = 0;
      updateSlideSwitchLabel();
      showSlide();
    });

    // Go Back and Next Dhikr buttons
    prevDhikrBtn.onclick = function(e) {
      e.stopPropagation();
      if (currentSlide > 0) {
        currentSlide--;
        clickCount = 0;
        showSlide();
      }
    };
    nextDhikrBtn.onclick = function(e) {
      e.stopPropagation();
      if (currentSlide < slides.length - 1) {
        currentSlide++;
        clickCount = 0;
        showSlide();
      }
    };

    // Count and change on click anywhere except header/footer
    document.body.addEventListener('click', function(e) {
      let isHeader = headerSlide.contains(e.target);
      let isFooter = e.target.closest('.footer');
      if (!isHeader && !isFooter && (slideDiv.contains(e.target) || meaningSection.contains(e.target) || mainContent.contains(e.target))) {
        handleSlideClick();
      }
    });

    // Remove click from slideDiv itself (handled globally)
    slideDiv.onclick = null;

    function handleSlideClick() {
      clickCount++;
      showFooterInfo();
      if (clickCount >= slides[currentSlide].clicks) {
        if (currentSlide < slides.length - 1) {
          currentSlide++;
          clickCount = 0;
          showSlide();
        } else {
          slideDiv.textContent = "ނިމުނީ 🎉";
          meaningSection.innerHTML = "";
          showFooterInfo();
        }
      }
    }

    function showFooterInfo() {
      const remaining = slides.length - currentSlide - 0;
      const total = slides.length;
      const clickText =  `${slides[currentSlide]?.clicks || 0} އިން  ${clickCount}`;
      const dhikrCountText = `${remaining}/${total}`; 
      footerInfo.innerHTML =  `(&nbsp;${clickText}) ~ ${dhikrCountText}&nbsp;`;
    }

    function showSlide() {
      // Font sizes adjusted by fontSize setting
      headerSlide.textContent = getHeaderText();
      headerSlide.style.fontSize = Math.round(fontSize * 1.4) + "px"; // Header: ~17px at default
      headerSlide.style.fontFamily = "'MVTyper', serif";

      slideDiv.textContent = slides[currentSlide].text;
      slideDiv.style.fontSize = fontSize + "px"; // Slide: adjustable
      slideDiv.style.fontFamily = selectedFont;

      meaningSection.innerHTML = `<strong>މާނަ:</strong> ${slides[currentSlide].meaning || ""}`;
      meaningSection.style.fontSize = Math.round(fontSize * .85) + "px"; // Meaning: adjustable, 12px at default

      showFooterInfo();
    }

    // Popup logic
    settingsBtn.onclick = () => {
      popupSettings.style.display = 'flex';
      popupOverlay.style.display = 'block';
    }
    closeSettingsBtn.onclick = () => {
      popupSettings.style.display = 'none';
      popupOverlay.style.display = 'none';
    }
    popupOverlay.onclick = () => {
      popupSettings.style.display = 'none';
      popupOverlay.style.display = 'none';
    }

    updateSlideSwitchLabel();
    showSlide();
  </script>
</body>
</html>
